/* Theme system with CSS custom properties */

:root {
    /* Light theme colors - WCAG AA compliant */
    --color-primary: 37 99 235; /* blue-600 - 4.8:1 contrast ratio */
    --color-primary-dark: 29 78 216; /* blue-700 - 6.1:1 contrast ratio */
    --color-primary-light: 59 130 246; /* blue-500 - 3.9:1 contrast ratio (large text only) */
    
    --color-secondary: 75 85 99; /* gray-600 - 7.1:1 contrast ratio */
    --color-secondary-dark: 55 65 81; /* gray-700 - 9.6:1 contrast ratio */
    --color-secondary-light: 107 114 128; /* gray-500 - 5.2:1 contrast ratio */
    
    --color-success: 22 163 74; /* green-600 - 4.6:1 contrast ratio */
    --color-success-dark: 21 128 61; /* green-700 - 5.9:1 contrast ratio */
    --color-success-light: 34 197 94; /* green-500 - 3.6:1 contrast ratio (large text only) */
    
    --color-warning: 217 119 6; /* amber-600 - 4.7:1 contrast ratio */
    --color-warning-dark: 180 83 9; /* amber-700 - 6.2:1 contrast ratio */
    --color-warning-light: 245 158 11; /* amber-500 - 3.8:1 contrast ratio (large text only) */
    
    --color-error: 220 38 38; /* red-600 - 5.9:1 contrast ratio */
    --color-error-dark: 185 28 28; /* red-700 - 7.7:1 contrast ratio */
    --color-error-light: 239 68 68; /* red-500 - 4.5:1 contrast ratio */
    
    /* Background colors */
    --bg-primary: 255 255 255; /* white */
    --bg-secondary: 249 250 251; /* gray-50 */
    --bg-tertiary: 243 244 246; /* gray-100 */
    
    /* Text colors - WCAG AA compliant */
    --text-primary: 17 24 39; /* gray-900 - 16.8:1 contrast ratio */
    --text-secondary: 55 65 81; /* gray-700 - 9.6:1 contrast ratio */
    --text-tertiary: 75 85 99; /* gray-600 - 7.1:1 contrast ratio */
    --text-quaternary: 107 114 128; /* gray-500 - 5.2:1 contrast ratio */
    
    /* Border colors */
    --border-primary: 229 231 235; /* gray-200 */
    --border-secondary: 209 213 219; /* gray-300 */
    --border-focus: 59 130 246; /* blue-500 */
    
    /* Shadow colors */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
    
    /* Spacing scale */
    --space-xs: 0.25rem; /* 4px */
    --space-sm: 0.5rem; /* 8px */
    --space-md: 1rem; /* 16px */
    --space-lg: 1.5rem; /* 24px */
    --space-xl: 2rem; /* 32px */
    --space-2xl: 3rem; /* 48px */
    
    /* Typography scale */
    --text-xs: 0.75rem; /* 12px */
    --text-sm: 0.875rem; /* 14px */
    --text-base: 1rem; /* 16px */
    --text-lg: 1.125rem; /* 18px */
    --text-xl: 1.25rem; /* 20px */
    --text-2xl: 1.5rem; /* 24px */
    --text-3xl: 1.875rem; /* 30px */
    
    /* Border radius */
    --radius-sm: 0.25rem; /* 4px */
    --radius-md: 0.375rem; /* 6px */
    --radius-lg: 0.5rem; /* 8px */
    --radius-xl: 0.75rem; /* 12px */
    --radius-2xl: 1rem; /* 16px */
    --radius-full: 9999px;
    
    /* Transitions */
    --transition-fast: 150ms ease-in-out;
    --transition-normal: 200ms ease-in-out;
    --transition-slow: 300ms ease-in-out;
    
    /* Z-index scale */
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;
    --z-toast: 1080;
}

/* Dark theme colors - WCAG AA compliant */
[data-theme="dark"] {
    /* Background colors */
    --bg-primary: 17 24 39; /* gray-900 */
    --bg-secondary: 31 41 55; /* gray-800 */
    --bg-tertiary: 55 65 81; /* gray-700 */
    
    /* Text colors - Enhanced contrast for dark mode */
    --text-primary: 255 255 255; /* white - 21:1 contrast ratio */
    --text-secondary: 229 231 235; /* gray-200 - 12.6:1 contrast ratio */
    --text-tertiary: 209 213 219; /* gray-300 - 9.2:1 contrast ratio */
    --text-quaternary: 156 163 175; /* gray-400 - 5.9:1 contrast ratio */
    
    /* Enhanced primary colors for dark mode */
    --color-primary: 96 165 250; /* blue-400 - 4.9:1 contrast ratio on dark bg */
    --color-primary-dark: 59 130 246; /* blue-500 - 6.2:1 contrast ratio on dark bg */
    --color-primary-light: 147 197 253; /* blue-300 - 3.8:1 contrast ratio (large text only) */
    
    /* Border colors */
    --border-primary: 55 65 81; /* gray-700 */
    --border-secondary: 75 85 99; /* gray-600 */
    
    /* Shadow colors (darker for dark theme) */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.3), 0 8px 10px -6px rgb(0 0 0 / 0.3);
}

/* Theme utility classes */
.theme-bg-primary {
    background-color: rgb(var(--bg-primary));
}

.theme-bg-secondary {
    background-color: rgb(var(--bg-secondary));
}

.theme-bg-tertiary {
    background-color: rgb(var(--bg-tertiary));
}

.theme-text-primary {
    color: rgb(var(--text-primary));
}

.theme-text-secondary {
    color: rgb(var(--text-secondary));
}

.theme-text-tertiary {
    color: rgb(var(--text-tertiary));
}

.theme-text-quaternary {
    color: rgb(var(--text-quaternary));
}

.theme-border-primary {
    border-color: rgb(var(--border-primary));
}

.theme-border-secondary {
    border-color: rgb(var(--border-secondary));
}

.theme-border-focus {
    border-color: rgb(var(--border-focus));
}

.theme-shadow-sm {
    box-shadow: var(--shadow-sm);
}

.theme-shadow-md {
    box-shadow: var(--shadow-md);
}

.theme-shadow-lg {
    box-shadow: var(--shadow-lg);
}

.theme-shadow-xl {
    box-shadow: var(--shadow-xl);
}

/* Color utility classes */
.theme-primary {
    color: rgb(var(--color-primary));
}

.theme-primary-dark {
    color: rgb(var(--color-primary-dark));
}

.theme-primary-light {
    color: rgb(var(--color-primary-light));
}

.theme-bg-primary-color {
    background-color: rgb(var(--color-primary));
}

.theme-bg-primary-dark {
    background-color: rgb(var(--color-primary-dark));
}

.theme-bg-primary-light {
    background-color: rgb(var(--color-primary-light));
}

.theme-success {
    color: rgb(var(--color-success));
}

.theme-success-dark {
    color: rgb(var(--color-success-dark));
}

.theme-success-light {
    color: rgb(var(--color-success-light));
}

.theme-bg-success {
    background-color: rgb(var(--color-success));
}

.theme-bg-success-dark {
    background-color: rgb(var(--color-success-dark));
}

.theme-bg-success-light {
    background-color: rgb(var(--color-success-light));
}

.theme-warning {
    color: rgb(var(--color-warning));
}

.theme-warning-dark {
    color: rgb(var(--color-warning-dark));
}

.theme-warning-light {
    color: rgb(var(--color-warning-light));
}

.theme-bg-warning {
    background-color: rgb(var(--color-warning));
}

.theme-bg-warning-dark {
    background-color: rgb(var(--color-warning-dark));
}

.theme-bg-warning-light {
    background-color: rgb(var(--color-warning-light));
}

.theme-error {
    color: rgb(var(--color-error));
}

.theme-error-dark {
    color: rgb(var(--color-error-dark));
}

.theme-error-light {
    color: rgb(var(--color-error-light));
}

.theme-bg-error {
    background-color: rgb(var(--color-error));
}

.theme-bg-error-dark {
    background-color: rgb(var(--color-error-dark));
}

.theme-bg-error-light {
    background-color: rgb(var(--color-error-light));
}

/* Spacing utility classes */
.theme-space-xs {
    gap: var(--space-xs);
}

.theme-space-sm {
    gap: var(--space-sm);
}

.theme-space-md {
    gap: var(--space-md);
}

.theme-space-lg {
    gap: var(--space-lg);
}

.theme-space-xl {
    gap: var(--space-xl);
}

.theme-space-2xl {
    gap: var(--space-2xl);
}

/* Typography utility classes */
.theme-text-xs {
    font-size: var(--text-xs);
}

.theme-text-sm {
    font-size: var(--text-sm);
}

.theme-text-base {
    font-size: var(--text-base);
}

.theme-text-lg {
    font-size: var(--text-lg);
}

.theme-text-xl {
    font-size: var(--text-xl);
}

.theme-text-2xl {
    font-size: var(--text-2xl);
}

.theme-text-3xl {
    font-size: var(--text-3xl);
}

/* Border radius utility classes */
.theme-radius-sm {
    border-radius: var(--radius-sm);
}

.theme-radius-md {
    border-radius: var(--radius-md);
}

.theme-radius-lg {
    border-radius: var(--radius-lg);
}

.theme-radius-xl {
    border-radius: var(--radius-xl);
}

.theme-radius-2xl {
    border-radius: var(--radius-2xl);
}

.theme-radius-full {
    border-radius: var(--radius-full);
}

/* Transition utility classes */
.theme-transition-fast {
    transition: all var(--transition-fast);
}

.theme-transition-normal {
    transition: all var(--transition-normal);
}

.theme-transition-slow {
    transition: all var(--transition-slow);
}

/* Theme toggle animation */
.theme-transition {
    transition: background-color var(--transition-normal), 
                color var(--transition-normal), 
                border-color var(--transition-normal);
}

/* Responsive design helpers */
@media (max-width: 640px) {
    :root {
        --space-md: 0.75rem; /* Slightly smaller spacing on mobile */
        --space-lg: 1.25rem;
        --space-xl: 1.75rem;
        --space-2xl: 2.5rem;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --border-primary: 0 0 0; /* black */
        --border-secondary: 0 0 0; /* black */
    }
    
    [data-theme="dark"] {
        --border-primary: 255 255 255; /* white */
        --border-secondary: 255 255 255; /* white */
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .theme-transition-fast,
    .theme-transition-normal,
    .theme-transition-slow,
    .theme-transition {
        transition: none;
    }
}

/* Enhanced theme toggle component */
.theme-toggle {
    @apply relative inline-flex items-center justify-center w-12 h-12 rounded-full;
    @apply bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700;
    @apply transition-all duration-200 ease-in-out;
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
}

.theme-toggle-icon {
    @apply w-5 h-5 transition-all duration-300 ease-in-out;
}

.theme-toggle-sun {
    @apply text-yellow-500 rotate-0 scale-100;
}

.theme-toggle-moon {
    @apply text-blue-400 rotate-90 scale-0;
}

[data-theme="dark"] .theme-toggle-sun {
    @apply rotate-90 scale-0;
}

[data-theme="dark"] .theme-toggle-moon {
    @apply rotate-0 scale-100;
}

/* Enhanced theme-aware components */
.theme-card {
    @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700;
    @apply shadow-sm hover:shadow-md transition-shadow duration-200;
}

.theme-input {
    @apply bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600;
    @apply text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400;
    @apply focus:ring-blue-500 focus:border-blue-500;
}

.theme-button {
    @apply bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600;
    @apply text-white border border-transparent;
    @apply focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
}

.theme-button-secondary {
    @apply bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600;
    @apply text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600;
}

.theme-link {
    @apply text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300;
    @apply underline decoration-blue-600/30 dark:decoration-blue-400/30;
    @apply hover:decoration-blue-600 dark:hover:decoration-blue-400;
}

.theme-divider {
    @apply border-gray-200 dark:border-gray-700;
}

.theme-overlay {
    @apply bg-black/50 dark:bg-black/70 backdrop-blur-sm;
}

/* Theme-aware status colors */
.theme-success {
    @apply text-green-600 dark:text-green-400;
}

.theme-success-bg {
    @apply bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800;
}

.theme-warning {
    @apply text-yellow-600 dark:text-yellow-400;
}

.theme-warning-bg {
    @apply bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800;
}

.theme-error {
    @apply text-red-600 dark:text-red-400;
}

.theme-error-bg {
    @apply bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800;
}

.theme-info {
    @apply text-blue-600 dark:text-blue-400;
}

.theme-info-bg {
    @apply bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800;
}

/* Theme-aware navigation */
.theme-nav {
    @apply bg-white/95 dark:bg-gray-900/95 backdrop-blur-md;
    @apply border-b border-gray-200 dark:border-gray-700;
}

.theme-nav-item {
    @apply text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white;
    @apply hover:bg-gray-100 dark:hover:bg-gray-800;
}

.theme-nav-item-active {
    @apply text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20;
}

/* Theme-aware forms */
.theme-form-group {
    @apply space-y-2;
}

.theme-form-label {
    @apply text-sm font-medium text-gray-700 dark:text-gray-300;
}

.theme-form-error {
    @apply text-sm text-red-600 dark:text-red-400;
}

.theme-form-help {
    @apply text-sm text-gray-500 dark:text-gray-400;
}

/* Theme-aware tables */
.theme-table {
    @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700;
}

.theme-table-header {
    @apply bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white;
    @apply border-b border-gray-200 dark:border-gray-700;
}

.theme-table-row {
    @apply border-b border-gray-200 dark:border-gray-700;
    @apply hover:bg-gray-50 dark:hover:bg-gray-700/50;
}

.theme-table-cell {
    @apply text-gray-900 dark:text-white;
}

/* Theme-aware modals */
.theme-modal-backdrop {
    @apply bg-black/50 dark:bg-black/70 backdrop-blur-sm;
}

.theme-modal-content {
    @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700;
    @apply shadow-xl;
}

.theme-modal-header {
    @apply border-b border-gray-200 dark:border-gray-700;
}

.theme-modal-footer {
    @apply border-t border-gray-200 dark:border-gray-700;
}

/* Theme-aware dropdowns */
.theme-dropdown {
    @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700;
    @apply shadow-lg ring-1 ring-black/5 dark:ring-white/10;
}

.theme-dropdown-item {
    @apply text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700;
}

.theme-dropdown-divider {
    @apply border-t border-gray-200 dark:border-gray-700;
}

/* Theme-aware badges */
.theme-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
}

.theme-badge-primary {
    @apply theme-badge bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300;
}

.theme-badge-secondary {
    @apply theme-badge bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300;
}

.theme-badge-success {
    @apply theme-badge bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300;
}

.theme-badge-warning {
    @apply theme-badge bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300;
}

.theme-badge-error {
    @apply theme-badge bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300;
}

/* Theme-aware progress bars */
.theme-progress {
    @apply bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden;
}

.theme-progress-bar {
    @apply bg-blue-600 dark:bg-blue-500 h-full transition-all duration-300;
}

/* Theme-aware skeleton loaders */
.theme-skeleton {
    @apply animate-pulse bg-gray-200 dark:bg-gray-700 rounded;
}

.theme-skeleton-text {
    @apply theme-skeleton h-4;
}

.theme-skeleton-title {
    @apply theme-skeleton h-6;
}

.theme-skeleton-avatar {
    @apply theme-skeleton rounded-full;
}

/* Theme-aware tooltips */
.theme-tooltip {
    @apply bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900;
    @apply px-2 py-1 text-sm rounded shadow-lg;
}

/* Theme-aware code blocks */
.theme-code {
    @apply bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100;
    @apply border border-gray-200 dark:border-gray-700 rounded;
}

.theme-code-inline {
    @apply theme-code px-1.5 py-0.5 text-sm font-mono;
}

.theme-code-block {
    @apply theme-code p-4 text-sm font-mono overflow-x-auto;
}

/* Theme system preferences detection */
@media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
        /* Apply dark theme variables when system prefers dark and no explicit theme is set */
        --bg-primary: 17 24 39;
        --bg-secondary: 31 41 55;
        --bg-tertiary: 55 65 81;
        --text-primary: 249 250 251;
        --text-secondary: 209 213 219;
        --text-tertiary: 156 163 175;
        --text-quaternary: 107 114 128;
        --border-primary: 55 65 81;
        --border-secondary: 75 85 99;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
        --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.3), 0 8px 10px -6px rgb(0 0 0 / 0.3);
    }
    
    :root:not([data-theme]) body {
        @apply dark;
    }
}

/* Theme transition animations */
.theme-transition-colors {
    transition: background-color var(--transition-normal),
                border-color var(--transition-normal),
                color var(--transition-normal);
}

.theme-transition-shadow {
    transition: box-shadow var(--transition-normal);
}

.theme-transition-all {
    transition: all var(--transition-normal);
}

/* Theme-aware focus states */
.theme-focus {
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
    @apply dark:focus:ring-offset-gray-800;
}

.theme-focus-within {
    @apply focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2;
    @apply dark:focus-within:ring-offset-gray-800;
}

/* Theme-aware selection */
::selection {
    @apply bg-blue-200 dark:bg-blue-800 text-blue-900 dark:text-blue-100;
}

::-moz-selection {
    @apply bg-blue-200 dark:bg-blue-800 text-blue-900 dark:text-blue-100;
}

/* Theme-aware scrollbars */
.theme-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgb(var(--border-secondary)) transparent;
}

.theme-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

.theme-scrollbar::-webkit-scrollbar-track {
    background: transparent;
}

.theme-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgb(var(--border-secondary));
    border-radius: 3px;
}

.theme-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: rgb(var(--text-quaternary));
}

/* Accessibility Enhancements */

/* Screen reader only content */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* Skip links */
.skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: rgb(var(--color-primary));
    color: white;
    padding: 8px;
    text-decoration: none;
    border-radius: 4px;
    z-index: 1000;
    font-weight: 600;
    transition: top 0.3s;
}

.skip-link:focus {
    top: 6px;
}

/* Enhanced focus indicators */
.focus-visible:focus-visible,
.focus-visible:focus {
    outline: 2px solid rgb(var(--color-primary));
    outline-offset: 2px;
    border-radius: 4px;
}

/* High contrast focus for buttons and interactive elements */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[tabindex]:focus-visible {
    outline: 2px solid rgb(var(--color-primary));
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(var(--color-primary), 0.2);
}

/* Ensure minimum touch target size */
.touch-target {
    min-height: 44px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Enhanced error states */
[aria-invalid="true"] {
    border-color: rgb(var(--color-error)) !important;
    box-shadow: 0 0 0 1px rgb(var(--color-error));
}

[role="alert"] {
    color: rgb(var(--color-error));
    font-weight: 500;
}

/* Loading states */
[aria-busy="true"] {
    cursor: wait;
    opacity: 0.7;
}

/* Disabled states */
[aria-disabled="true"],
:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --color-primary: 0 0 255; /* Pure blue */
        --color-error: 255 0 0; /* Pure red */
        --color-success: 0 128 0; /* Pure green */
        --text-primary: 0 0 0; /* Pure black */
        --border-primary: 0 0 0; /* Pure black borders */
        --border-secondary: 0 0 0;
    }
    
    [data-theme="dark"] {
        --color-primary: 0 255 255; /* Cyan for dark mode */
        --color-error: 255 100 100; /* Light red */
        --color-success: 100 255 100; /* Light green */
        --text-primary: 255 255 255; /* Pure white */
        --border-primary: 255 255 255; /* White borders */
        --border-secondary: 255 255 255;
    }
    
    /* Ensure all interactive elements have visible borders */
    button, 
    input, 
    select, 
    textarea,
    a {
        border: 2px solid currentColor !important;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    .motion-reduce {
        animation: none !important;
        transition: none !important;
    }
}

/* Color blindness support - ensure information isn't conveyed by color alone */
.status-indicator::before {
    content: '';
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 8px;
}

.status-success::before {
    background-color: rgb(var(--color-success));
    content: '✓';
    background: none;
    color: rgb(var(--color-success));
    font-weight: bold;
}

.status-error::before {
    background-color: rgb(var(--color-error));
    content: '✗';
    background: none;
    color: rgb(var(--color-error));
    font-weight: bold;
}

.status-warning::before {
    background-color: rgb(var(--color-warning));
    content: '!';
    background: none;
    color: rgb(var(--color-warning));
    font-weight: bold;
}

/* Enhanced link styles for better accessibility */
a:not(.button):not(.btn) {
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
    color: rgb(var(--color-primary));
}

a:not(.button):not(.btn):hover {
    text-decoration-thickness: 2px;
    color: rgb(var(--color-primary-dark));
}

a:not(.button):not(.btn):focus-visible {
    background-color: rgba(var(--color-primary), 0.1);
    padding: 2px 4px;
    margin: -2px -4px;
    border-radius: 4px;
}

/* Ensure sufficient spacing between interactive elements */
.interactive-group > * + * {
    margin-left: 8px;
}

.interactive-group.vertical > * + * {
    margin-left: 0;
    margin-top: 8px;
}

/* Enhanced table accessibility */
table {
    border-collapse: collapse;
    width: 100%;
}

th {
    text-align: left;
    font-weight: 600;
    background-color: rgba(var(--text-primary), 0.05);
    border-bottom: 2px solid rgb(var(--border-primary));
}

td, th {
    padding: 12px;
    border-bottom: 1px solid rgb(var(--border-primary));
}

/* Enhanced form accessibility */
fieldset {
    border: 2px solid rgb(var(--border-primary));
    border-radius: 8px;
    padding: 16px;
    margin: 16px 0;
}

legend {
    font-weight: 600;
    padding: 0 8px;
    color: rgb(var(--text-primary));
}

/* Required field indicators */
.required::after {
    content: ' *';
    color: rgb(var(--color-error));
    font-weight: bold;
}

/* Form validation styles */
.field-valid {
    border-color: rgb(var(--color-success)) !important;
}

.field-invalid {
    border-color: rgb(var(--color-error)) !important;
}

.validation-message {
    font-size: 0.875rem;
    margin-top: 4px;
    font-weight: 500;
}

.validation-message.success {
    color: rgb(var(--color-success));
}

.validation-message.error {
    color: rgb(var(--color-error));
}

/* Enhanced modal accessibility */
.modal-backdrop {
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
}

.modal-content {
    max-height: 90vh;
    overflow-y: auto;
    border-radius: 12px;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

/* Ensure proper heading hierarchy */
h1 { font-size: 2.25rem; font-weight: 800; }
h2 { font-size: 1.875rem; font-weight: 700; }
h3 { font-size: 1.5rem; font-weight: 600; }
h4 { font-size: 1.25rem; font-weight: 600; }
h5 { font-size: 1.125rem; font-weight: 500; }
h6 { font-size: 1rem; font-weight: 500; }

/* Print styles */
@media print {
    :root {
        --bg-primary: 255 255 255;
        --bg-secondary: 255 255 255;
        --bg-tertiary: 255 255 255;
        --text-primary: 0 0 0;
        --text-secondary: 0 0 0;
        --text-tertiary: 0 0 0;
        --text-quaternary: 0 0 0;
        --border-primary: 0 0 0;
        --border-secondary: 0 0 0;
    }
    
    .theme-toggle,
    .theme-modal-backdrop,
    .theme-overlay,
    .skip-link {
        display: none !important;
    }
    
    /* Ensure good contrast in print */
    * {
        background: transparent !important;
        color: black !important;
        box-shadow: none !important;
        text-shadow: none !important;
    }
    
    a, a:visited {
        text-decoration: underline;
        color: black !important;
    }
    
    /* Show URLs for links in print */
    a[href]:after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
        color: #666;
    }
    
    /* Don't show URLs for fragment identifiers or javascript */
    a[href^="#"]:after,
    a[href^="javascript:"]:after {
        content: "";
    }
}